<!--*********************************************************************************************
@Created By :      Amrutha R
@CreatedDate :     17 April 2015
Description :      VF page for NXP community users to post stories
***************************************************************************************************-->

<apex:page standardStylesheets="false" title="NXP TechSupport Community" cache="True" showHeader="false" sidebar="false"  extensions="CommunitiesSuccessStoriesController" standardController="Idea" recordSetVar="ideaSetVar" >
    
<style>
    .listHeader .btn 
    {
    visibility: hidden;
    }
    
    .pbtitle 
    {
    background-color: #C0BE72;
    font-weight: bold;
    font-size: 91%;
    padding: 2px 2px 2px 5px;
    margin-top: 15px;
    overflow: hidden;
    margin-bottom: 2px;
    }

                        
.centerContent {
padding-left:10px;
}
.threecolumn{
margin-right: 10px;
margin-left: -10px;
}

.bigdisplay{                                                     
     height: 900px; 
     width: 640px;   
     margin-top: 4px;  
    -webkit-box-shadow: 0 0 10px #bdbdbd;
     box-shadow: 0 0 10px #bdbdbd;
    -webkit-border-radius: 3px; 
    -moz-border-radius: 3px; 
    border-radius: 3px; 
                        
}
.display{                          
     border-radius: 3px;
    -webkit-box-shadow: 0 0 10px #bdbdbd;                           
     width: 570px;
     height:50px;  
    margin-left: 25px;
    margin-top:5px;   
    table-layout: fixed;                  
}

.submit-btn input {

    background-image: linear-gradient(to bottom,  0%,  50%,  100%);
    width:80px;height:30px;
    color: black;
    }
    .submit-btn input:hover {
     
    background-image: linear-gradient(to bottom,  0%,  50%,  100%);
    width:80px;height:30px;
    color: black;
    }                         
.textar {
    width: 450px;
    height: 26px;
    
    border: 1px solid #c0c0c0;
    border-top-left-radius: 3px;
    border-top-right-radius: 3px;
    border-bottom-left-radius: 3px;
    border-bottom-right-radius: 3px;
}

blockquote {
    background: #efefef;
    display: block;
  border: 1px solid #ccc;
}
blockquote p {margin-left: 15px; margin-top: 15px; margin-right:15px; margin-bottom: 5px; }

</style>
    
    <apex:stylesheet value="{!URLFOR($Resource.CommunityUIComopnent, 'CommunityUIComopnent/css/stylesheet.css')}" />    
    <apex:stylesheet value="{!URLFOR($Resource.dropdownjs, 'dropdownjs.js')}" />
    <apex:stylesheet value="{!URLFOR($Resource.CommunityUIComopnent, 'CommunityUIComopnent/css/reset.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.CommunityUIComopnent, 'CommunityUIComopnent/css/tree.css')}" />
    <apex:includeScript value="{!URLFOR($Resource.jquery171min, '/jquery-1.7.1.min.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.jquery171min, '/jquery-ui-1.8.17.custom.min.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.CommunityUIComopnent, 'CommunityUIComopnent/js/jquery-1.7.2.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.CommunityUIComopnent, 'CommunityUIComopnent/js/tree.js')}" />
    <apex:stylesheet value="{!URLFOR($Resource.CommunityUIComopnent, 'CommunityUIComopnent/css/Casestylesheet.css')}" />

<script>

$(document).ready(function(){

            var editorNo=0;
            var noOfEditorsOnAPage=1;
        CKEDITOR.on('instanceReady', function(e) {
            
            if(editorNo>=noOfEditorsOnAPage){

            return;

            }else{

            editorNo++;

            }

            var target = e.editor.config.bodyId;
            var name = e.editor.name;
            e.editor.destroy();

            CKEDITOR.editorConfig = function( config ) { config.magic = true; }
            CKEDITOR.replace(name, {
                        height : 200, width: 500,
                        bodyId : target
            });
        });
    });
</script>

    <body>
    <div id="fb-root">
    </div>
    <div>
        <div id="page" style="background:white;width: 1030px; position: relative;top: 0px;">  
            <c:headercommunity >
            </c:headercommunity>  
            <apex:includeScript value="{!URLFOR($Resource.NXPJs, '/jquery-1.7.2.js')}" />
            <apex:includeScript value="{!URLFOR($Resource.NXPJs, '/jquery.hoverIntent.js')}" />
            <apex:includeScript value="{!URLFOR($Resource.NXPJs, '/header.js')}" />
            <apex:stylesheet value="{!URLFOR($Resource.NXPCss, '/reset.css')}" />
            <apex:stylesheet value="{!URLFOR($Resource.NXPCss, '/basic.css')}" />
            <apex:stylesheet value="{!URLFOR($Resource.NXPCss, '/header.css')}" /> 
            <apex:stylesheet value="{!URLFOR($Resource.NXPCss, '/tabs.css')}" /> 
            
            <c:menuxp1 >
            </c:menuxp1>  
        </div><br/><br/>
        <div style="width:980px; float:left; margin-left:20px; margin-bottom:-5px; " class="hoverAnchor">
            <apex:outputLink id="HomePage" value="/community/CommunitiesHomePage" >Home
            </apex:outputLink>&nbsp;
            <apex:image value="{!$Resource.arrow}" style="test-align: bottom;"/>
            Success Stories &nbsp;
        </div><br/><br/><br/>
        <div id="Chatteranswer" style="background-color: white;top:20px; left:0px; float:left;position:relative;width:980px;">
            <div style="float:left;position:relative;">
        <div class="tabs-container clearfix tabsMargin">
            <ul class="tabs">
                <c:CommunitiesSuccessStoriesTabSection ></c:CommunitiesSuccessStoriesTabSection>
            </ul>
            <div class="tab-container">
                <div class="top-left">
                    <div class="top-right">
                        <div class="top-middle"><!--_--></div>
                    </div>
                </div>
                <div class="middle-left">
                    <div class="middle-right">
                        <div class="middle panes">
                            <div id="section_products1" class="noborder top">
                                <div class="article-header">
                                   <!-- <h2 class="nxp-darkgreen">Title tab content</h2>-->
                                   <span ><br/></span>
                                </div>
                                <div class="article-content">
                                     <div class="threecolumn" style="background-color: white;float:left;position:relative;width:910px;">
                
                  

            <!-------------------------------chatter answers---------------------------->
                        
                             <c:socialmediacommunity_test ></c:socialmediacommunity_test>

                        <div id="centerContent" class="centerContent">
                             <div style="position: relative; background-color:white; width: 600px; ">
                                <apex:form id="forms">
                                    
                                    <apex:pageBlock id="block" rendered="{!istabs}">
                                        
                                        <ul class="tabs" id="tabs">
                                        <li style="visibility: visible;" >
                                            
                                        <ideas:listOutputLink styleClass="{!If(strSortName=='recent' || strSortName==null,'current','')}"   sort="recent" page="CommunitiesSuccessStories" communityId="{!CommunitiesStoryZoneId}" ><span class="tab-left"><span class="tab-right">Recent Stories</span></span></ideas:listOutputLink>
                                        </li>
                                            <li style="visibility: visible;" >
                                            
                                        <ideas:listOutputLink styleClass="{!If(strSortName=='popular'  ,'current','')}" sort="popular" page="CommunitiesSuccessStories" communityId="{!CommunitiesStoryZoneId}"><span class="tab-left"><span class="tab-right">Popular Stories</span></span></ideas:listOutputLink>
                                        </li>
                                            
                                            <li style="visibility: visible;" >
                                            
                                        <ideas:listOutputLink styleClass="{!If(strSortName=='top','current','')}" sort="top" page="CommunitiesSuccessStories" communityId="{!CommunitiesStoryZoneId}"><span class="tab-left"><span class="tab-right">Top Stories</span></span></ideas:listOutputLink>
                                        </li>
                                            <li style="visibility: visible;" >
                                                                           
                                        <ideas:listOutputLink styleClass="{!If(strSortName=='comments','current','')}" sort="comments" page="CommunitiesSuccessStories" communityId="{!CommunitiesStoryZoneId}" ><span class="tab-left"><span class="tab-right">Comments</span></span></ideas:listOutputLink>
                                        </li>
                                            </ul>
                                        
                                    </apex:pageBlock>
                                    
                                    <table class="bigdisplay"> 
                                        <tr>
                                            <td >
                                                <apex:pageMessages id="error" />
                                                <apex:pageBlock rendered="{!isCategory}" id="topSection">
                                                <div class="controls submit-btn">
                                                    <apex:commandButton value="Post Story" action="{!postStory}" style="margin-left: 230px;margin-top: 25px; font-weight: bold;"/>
                                                    <apex:outputLabel value="Categories:" style="color: black; font-weight: bold;text-align: left;margin-left: 60px;"/>&nbsp;
                                                    <apex:selectList value="{!categoryFilterId}" size="1" >
                                                        <apex:actionSupport event="onchange" action="{!fetchStories}" rerender="ideas"/>
                                                        <apex:selectOptions value="{!stories}"/>
                                                    </apex:selectList>
                                                    </div>
                                                    <br/>
                                                </apex:pageBlock>
                                                
                                                <center><apex:outputLabel value="No Story Posted" style="color: black; font-weight: bold;text-align: left;margin-left: 5px;" rendered="{!isStoryPosted}"/></center> 
                                                <div style=" height: 800px; width: 637px; overflow:auto; margin-bottom: 15px;margin-top:5px; " >
                                                    <apex:pageBlock rendered="{!isIdeas}" id="ideas">
                                                        <apex:dataList value="{!lstIdeas}" var="ideadata" id="ideaTab1" >
                                                            <apex:outputPanel rendered="{!isNotVote}" id="withoutLoginSection">
                                                                <table class="display"> 
                                                                    <tr >
                                                                        <td width="20%" height="60%">
                                                                            
                                                                            <table style="text-align:center;">
                                                                                <tr>
                                                                                    <td style="padding-top: 20px; padding-left:15px;padding-right: 20px;"><apex:image url="{!$Resource.StoryImage}" width="80" height="55"/></td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td style="padding-top: 10px; padding-left:15px;padding-right: 20px;"><apex:outputText value="{!FLOOR(ideadata.votetotal)}"></apex:outputText></td> 
                                                                                </tr>
                                                                                <tr>
                                                                                    <td style="padding-left:15px;padding-bottom: 10px;padding-right: 20px;"> Points </td>
                                                                                </tr>
                                                                            </table> 
                                                                        </td>
                                                                        <td  width="70%" height="60%" style="overflow: auto;">
                                                                            <table >
                                                                                <tr>
                                                                                    <td  style="padding-top: 20px;font-weight: bold;font-size: 15px;padding-right: 20px;">{!ideadata.title}</td> 
                                                                                </tr>
                                                                                <tr>
                                                                                    <td style="padding-top: 28px;padding-bottom: 4px;padding-right: 20px;"> <apex:outputText value="{!ideadata.body}" escape="false" /> </td>   
                                                                                </tr>
                                                                                <tr>
                                                                                    <td style="padding-top: 35px;padding-bottom: 1px;padding-right: 20px;">{!ideadata.numComments} Comment , Posted by {!ideadata.CreatorName} on {!ideadata.CreatedDate}</td>   
                                                                                </tr>
                                                                                <tr>
                                                                                    <td style="padding-bottom:20px;padding-right: 20px;">Categories: {!ideadata.categories}</td>
                                                                                </tr>
                                                                            </table> 
                                                                        </td> 
                                                                    </tr>
                                                                </table> 
                                                            </apex:outputPanel><br/> 
                                                            
                                                            <apex:outputPanel rendered="{!isVote}" id="withLoginSection">
                                                                <table class="display"> 
                                                                    <tr>
                                                                        <td width="20%" height="60%">
                                                                            <table style="text-align:center;">  
                                                                                <tr >
                                                                                    <td style="padding-top: 20px; padding-left:15px;padding-right: 20px;">
                                                                                        <apex:vote objectId="{!ideadata.id}"  rerender="ideas"/>                                                                                
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                        <td  width="70%" height="60%" style="overflow: auto;">
                                                                            <table >
                                                                                <tr >
                                                                                    <td style="padding-top: 20px;font-weight: bold;font-size: 15px;padding-right: 20px;"><ideas:detailOutputLink page="CommunitiesViewStories" ideaId="{!ideadata.id}" style="text-decoration: none; border-bottom: 1px solid black;">{!ideadata.title}</ideas:detailOutputLink></td> 
                                                                                </tr>
                                                                                <tr>
                                                                                    <td style="padding-top: 28px;padding-right: 20px;"> <apex:outputText value="{!ideadata.body}" escape="false" /> </td>   
                                                                                </tr>
                                                                                <tr>
                                                                                    <td style="padding-top: 35px;padding-bottom: 1px;padding-right: 20px;"><ideas:detailOutputLink page="CommunitiesViewStories" ideaId="{!ideadata.id}" style="text-decoration: none; border-bottom: 1px solid black;font-weight: bold;">{!ideadata.numComments} Comment  </ideas:detailOutputLink>  , Posted by {!ideadata.CreatorName} on {!ideadata.CreatedDate}</td>   
                                                                                </tr>
                                                                                 <tr>
                                                                                    <td style="padding-bottom: 20px;padding-right: 20px;">Categories: {!ideadata.categories}</td>
                                                                                </tr>
                                                                            </table> 
                                                                        </td> 
                                                                    </tr>
                                                                </table> 
                                                            </apex:outputPanel><br/>
                                                        </apex:dataList>
                                                    </apex:pageBlock>
                                                    <div style="margin-left:10px;">
                                                
                                                        <apex:pageBlock rendered="{!isPost}"  title="Describe your Story" id="postSection" ><br/>
                                                        <center><div class="controls submit-btn">     
                                                                <apex:commandButton value="Post" action="{!savePost}" styleClass="margin-left:180px;"/>&nbsp; &nbsp; &nbsp;
                                                                <apex:commandButton value="Cancel" action="{!cancelPost}"/></div>
                                                            </center>
                                                            <apex:pageBlockSection >
                                                                <apex:pageBlockSectionItem id="titleSection">
                                                                    <apex:outputLabel value="Title" style="font-weight:bold;text-align: left;font-size:12px;"/>
                                                                    <apex:outputPanel style="margin-left: 2px;">
                                                                        <div style="border-left: 3px solid red; padding-left: 2px;">
                                                                            <apex:inputText value="{!strIdeaTitle}" styleClass="textar" style="text-align:left;"/></div>
                                                                    </apex:outputPanel>
                                                                </apex:pageBlockSectionItem><br/><br/><br/><br/>
                                                                
                                                                <apex:pageBlockSectionItem id="categorySection">
                                                                    <apex:outputLabel value="Category" style="font-weight:bold;text-align: left;font-size:12px;"/>
                                                                    <apex:outputPanel >
                                                                        <div style="border-left: 3px solid red; padding-left: 2px;">
                                                                            <apex:selectList size="1" value="{!strCategories}"  multiselect="true" style="height:75px;width:230px;" >
                                                                                <apex:selectOptions value="{!categories}" id="Categories" />
                                                                            </apex:selectList></div>
                                                                            
                                                                    </apex:outputPanel>
                                                                </apex:pageBlockSectionItem><br/>
                                                                
                                                                <apex:pageBlockSectionItem id="bodySection">
                                                                    <apex:outputLabel value="Description " style="font-weight:bold;text-align: left;font-size:12px;"/> 
                                                                    <apex:outputPanel ><br/>
                                                                        
                                                                        <div style="border-left: 3px solid red; padding-left: 2px;">
                                                                            <apex:inputTextarea richtext="true" value="{!strIdeaBody}"/>
                                                                    </div><br/>
                                                                    </apex:outputPanel>
                                                                </apex:pageBlockSectionItem><br/>
                                         
                                                        </apex:pageBlockSection><br/>
                                                        <center><div class="controls submit-btn">     
                                                                <apex:commandButton value="Post" action="{!savePost}" styleClass="margin-left:180px;"/>&nbsp; &nbsp; &nbsp;
                                                                <apex:commandButton value="Cancel" action="{!cancelPost}"/></div>
                                                            </center>    
                                                            
                                                        </apex:pageBlock>
                                                    </div>
                                                    <apex:pageBlock rendered="{!isWithoutLogin}" id="loginErrorSection">
                                                        <center>
                                                            <apex:outputText value="Your must be a registered user to post a story"/><br/>
                                                            <apex:outputLink id="login"  value="/community/customcommunitylogin?startUrl=/community/CommunitiesHomePage" style="color:blue; ">Login here to post</apex:outputLink>
                                                        </center>     
                                                    </apex:pageBlock>
                                                </div>
                                            </td>
                                        </tr>
                                        </table>
                                 </apex:form>
                            </div>
                                         </div>
                                    </div>
                                </div>  
                            </div>
                            <br style="clear:both"/>
                        </div>              
                    </div>
                    <!--  <br style="clear:both"/>-->
                    <div class="bottom-left">
                        
                        <div class="bottom-right">
                            <div class="bottom-middle"><!--_--></div>
                        </div>
                    </div>
                    
                </div>
                
            </div>
                </div>    
            </div>
            
        </div>
        <c:footercommunity />  
        <!----============================ FOOTER ======================------->
        </div>  
        <script type="text/javascript" src="/community/resource/1412757333000/CommunityOmnitureScript/s_code.js"></script>
        
</body>
 
        
</apex:page>